generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Produto {
  id          Int      @id @default(autoincrement())
  nome        String
  codigoBarra String   @unique @map("codigo_barra")
  precoCusto  Decimal  @map("preco_custo") @db.Decimal(10, 2)
  precoVenda  Decimal  @map("preco_venda") @db.Decimal(10, 2)
  estoque     Decimal  @db.Decimal(10, 3) 
  unidade     String   
  categoria   String?
  criadoEm    DateTime @default(now()) @map("criado_em")

  // Relação: Um produto pode estar em muitos itens de venda
  itens       ItemVenda[] 

  @@map("produtos")
}

model Venda {
  id          Int      @id @default(autoincrement())
  data        DateTime @default(now())
  total       Decimal  @db.Decimal(10, 2)
  
  // Relação: Uma venda tem vários itens
  itens       ItemVenda[]

  @@map("vendas")
}

model ItemVenda {
  id          Int      @id @default(autoincrement())
  quantidade  Decimal  @db.Decimal(10, 3) // Ex: 0.5 metros de areia
  precoUnit   Decimal  @map("preco_unitario") @db.Decimal(10, 2)
  
  // Ligações (Foreign Keys)
  vendaId     Int      @map("venda_id")
  venda       Venda    @relation(fields: [vendaId], references: [id])
  
  produtoId   Int      @map("produto_id")
  produto     Produto  @relation(fields: [produtoId], references: [id])

  @@map("itens_venda")
}
// Tabela de Usuários do Sistema
model User {
  id       String @id @default(uuid())
  nome     String
  email    String @unique
  senha    String // Aqui guardaremos a senha criptografada
  cargo    String // "GERENTE", "SUPERVISOR", "VENDEDOR"
  criadoEm DateTime @default(now())
}